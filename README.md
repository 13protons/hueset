# hueset

A node module to set Phillips hue bulb parameters

## Installation

Hueset can be used as a global or local package. To install it locally and use it in your project, run:

```bash
npm install hueset
```

If you just want to control hue bulbs from the command line, install it globally. This will give you access to the `hueset` command line argument:

```bash
npm install -g hueset
```

## Usage

To use `hueset`, you need to setup a user on your hue bridge, know your bridge's IP address, and know the light number you'd like to control. Check out [this guide](http://www.developers.meethue.com/documentation/getting-started) for getting that basic info.

```javascript
var user = '12345';
var ip = '10.0.0.1';
var light = '1';
var color = 'red';

var Hue = require('hueset');
var light = new Hue.light(user, ip, light);

light.on(color);
```

* **user** is the hash generated by creating a user on your hue bridge
* **ip** is the local IP address of your hue bridge
* **light** is the light number you'd like to actuate
* **color** is any valid CCS color string, such as 'red' or '#ff0000'

### .on([color])

Turns on the light referenced by the `new Hue.light` constructor. If a color is supplied, the light is set to that color when it is turned on. Lights that are already on will be set to the new color. If no color is supplied, the light state will simply be set to on and use the previous color values. Lights that do not support color will simply use the brightness value of the supplied color (i.e. it's safe to set Philips Hue White bulb to 'purple'.)

```javascript
light.on('red');
```

### .off()

Turns off the light referenced by the `new Hue.light` constructor. Note that this simply set's the light's on state to 'false', so subsequent calls to `.on()` will restore the light to the exact same color and brightness from before `.off()` was called.

```javascript
light.off('red');
```

## Global Usage

When installed globablly, you can call `hueset` from the command line.

### CLI switches

See command line options and usage by running `hueset --help`

```
Usage: hueset [options]

  Options:

    -h, --help           output usage information
    -V, --version        output the version number
    -u, --user [value]   Hue User Name
    -i, --ip [value]     IP address of hue hub
    -l, --light <n>      Light number (1, 2, etc.)
    -c, --color [value]  Any valid CSS color ('red', #00ff33, etc.)
    -o, --off            Turn off light specified by --light
```

Example:

```bash
$ hueset -u '1234' -i '10.0.0.1' -l 2 -c yellow
```

Any of these switches overrides environment variables, so this is possible:

```bash
export hueuser=123456
export hueip=10.0.100.42
export huelight=4
```

command line:

```bash
$ source .env
$ hueset -c red
```

### Environment Vars

Hueset will read environment variables. Set these on the command line, or `source` them from a `.env` file that is excluded from your SCM.

`.env`:

```bash
export hueuser=123456
export hueip=10.0.100.42
export huelight=4
```

command line:

```bash
$ source .env
$ hueset -c red
```

These can also be set or overridden at runtime

```bash
$ source .env
$ huelight=2 hueset -c red
```
